<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Termux Hacking Family</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">

    <style>
        /* --- ONLY ADMIN & SEARCH GLOW EFFECTS --- */
        #search-input:focus { 
            border: 1px solid #00ff41 !important; 
            box-shadow: 0 0 15px #00ff41; 
            outline: none; 
        }

        .admin-glow-green { border: 1px solid #00ff41 !important; box-shadow: 0 0 15px rgba(0, 255, 65, 0.3); padding: 15px; border-radius: 10px; margin-bottom: 20px; }
        .admin-glow-red { border: 1px solid #ff0055 !important; box-shadow: 0 0 15px rgba(255, 0, 85, 0.3); padding: 15px; border-radius: 10px; margin-top: 20px; }

        .btn-green-glow {
            background: #111; border: 1px solid #00ff41; color: #00ff41;
            padding: 12px; cursor: pointer; transition: 0.4s; font-weight: bold; width: 100%; border-radius: 5px;
        }
        .btn-green-glow:hover { background: #00ff41; color: #000; box-shadow: 0 0 20px #00ff41; }

        .btn-red-glow {
            background: #111; border: 1px solid #ff0055; color: #ff0055;
            padding: 12px; cursor: pointer; transition: 0.4s; font-weight: bold; width: 100%; border-radius: 5px;
        }
        .btn-red-glow:hover { background: #ff0055; color: #fff; box-shadow: 0 0 20px #ff0055; }

        .upload-label { 
            display: block; padding: 15px; border: 1px dashed #444; border-radius: 8px; 
            cursor: pointer; color: #00ff41; text-align: center; margin: 10px 0;
        }
        /* --------------------------------------- */
    </style>

    <script src="https://checkout.razorpay.com/v1/checkout.js"></script>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getDatabase, ref, set, get, push, onValue, update } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js";
        import { getStorage, ref as sRef, uploadBytes, getDownloadURL } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-storage.js";

        const dbConfig = {
            apiKey: "AIzaSyDVZCY-3xLepXzcdWGtR34wqdXqJQevI7Q",
            authDomain: "termuxhacking-aac55.firebaseapp.com",
            projectId: "termuxhacking-aac55",
            storageBucket: "termuxhacking-aac55.firebasestorage.app",
            messagingSenderId: "921781091312",
            appId: "1:921781091312:web:39a1b96ceda5bc60b83b35"
        };

        const app = initializeApp(dbConfig);
        window.db = getDatabase(app);
        window.storage = getStorage(app);
        window.BOT_TOKEN = "8004087165:AAF-fMbvjDYSK64m0maGNf6oIUOvq9Xr-8w";
        window.CHAT_ID = "-1001003225658257";

        // Exports
        window.dbRef = ref; window.dbSet = set; window.dbPush = push; window.sRef = sRef; 
        window.uploadBytes = uploadBytes; window.getDownloadURL = getDownloadURL;
    </script>
</head>
<body onload="initApp()">

  <header>
    <div class="menu-icon" onclick="openNav()"><i class="fas fa-bars"></i></div>
    <div class="brand-glow">Termux Hacking<br>Family</div>
    <div class="profile-icon-right" onclick="showSection('profile')">
        <img src="https://cdn-icons-png.flaticon.com/512/3135/3135715.png" id="headerProfileImg">
    </div>
  </header>

  <div id="mySidebar" class="sidebar">
    <a href="javascript:void(0)" class="closebtn" onclick="closeNav()">&times;</a>
    <a onclick="showSection('home')"><i class="fas fa-home"></i> Home</a>
    <a onclick="showSection('about')"><i class="fas fa-info-circle"></i> About Us</a>
    <a onclick="showSection('profile')"><i class="fas fa-user-secret"></i> Profile</a>
    <a onclick="showSection('prime')" style="color:gold;"><i class="fas fa-crown"></i> Prime Zone</a>
    <div id="admin-link" style="display:none; border-top:1px solid #333; margin-top:10px;">
        <p style="color:#666; font-size:12px; padding-left:20px; margin-top:10px;">ADMIN ACCESS</p>
        <a onclick="showSection('admin')" style="color:red;"><i class="fas fa-cogs"></i> Admin Panel</a>
    </div>
  </div>

  <div class="container">
    <div id="home-section" class="hidden-section" style="display:block;">
        <div style="margin-bottom: 20px; position:relative;">
            <input type="text" id="search-input" onkeyup="searchTools()" placeholder="üîç Search Tool..." 
                style="padding: 12px 15px; border-radius: 25px; background: #111; color: white; width: 100%;">
        </div>
        <div id="tools-grid"></div>
    </div>

    <div id="about-section" class="hidden-section">
        <h2 style="color:#00ff41; text-align:center;">‚ÑπÔ∏è ABOUT US</h2>
        <div class="card" style="text-align:center;">
            <img src="https://cdn-icons-png.flaticon.com/512/2092/2092663.png" style="width:100px; height:100px; margin-bottom:15px; filter: drop-shadow(0 0 10px #00ff41);">
            <h3 style="color:white;">Termux Hacking Family</h3>
            <div style="border: 1px dashed gold; padding:15px; margin:15px 0; border-radius:10px;">
                <i class="fab fa-whatsapp" style="color:#25D366; font-size:24px;"></i> 
                <span style="color:white; font-weight:bold;"> Official Support</span>
                <div id="wa-locked" style="margin-top:10px;">
                    <p style="color:red; font-size:12px;">üîí LOCKED (Prime Only)</p>
                    <p style="filter: blur(5px); color:#aaa;">+91 72318 60034</p>
                    <button class="btn-gold" onclick="showSection('prime')">UNLOCK NOW</button>
                </div>
            </div>
            <div class="social-links">
                <a href="https://t.me/Termuxcommandsi" target="_blank" class="social-btn tg">Telegram</a>
                <a href="https://youtube.com/@termuxhacking0" target="_blank" class="social-btn yt">YouTube</a>
            </div>
        </div>
    </div>

    <div id="admin-section" class="hidden-section">
        <h2 style="color:red; text-align:center;">‚ö†Ô∏è MASTER ADMIN</h2>

        <div class="card admin-glow-green">
            <h3 style="color:#00ff41;">üõ† Upload Tool (Photo)</h3>
            <input type="text" id="tool-name" placeholder="Tool Name">
            <label for="tool-file-input" class="upload-label" id="tool-label"><i class="fas fa-image"></i> Select Photo from Gallery</label>
            <input type="file" id="tool-file-input" accept="image/*" style="display:none;" onchange="updateLabel('tool-file-input', 'tool-label')">
            <textarea id="tool-desc" placeholder="Description..."></textarea>
            <button class="btn-green-glow" onclick="handleAdminUpload('tool')">UPLOAD TO TELEGRAM</button>
        </div>

        <div class="card admin-glow-red">
            <h3 style="color:#ff0055;">üëë Upload Prime (PDF/Video)</h3>
            <input type="text" id="prime-title" placeholder="Content Title">
            <label for="prime-file-input" class="upload-label" id="prime-label" style="color:#ff0055; border-color:#ff0055;"><i class="fas fa-file-video"></i> Select PDF or Video</label>
            <input type="file" id="prime-file-input" accept=".pdf, video/*" style="display:none;" onchange="updateLabel('prime-file-input', 'prime-label')">
            <select id="prime-type" style="background:#111; color:white; width:100%; padding:10px; margin-bottom:10px;">
                <option value="video">Video Class</option>
                <option value="pdf">PDF Document</option>
            </select>
            <button class="btn-red-glow" onclick="handleAdminUpload('prime')">UPLOAD TO PRIME ZONE</button>
        </div>
    </div>

    <div id="profile-section" class="hidden-section">
        <h2 style="color:#00ff41; text-align:center;">üë§ PROFILE SETTINGS</h2>
        <div class="card" style="text-align:center;">
            <div style="position:relative; display:inline-block;">
                <img id="profile-preview-img" src="https://cdn-icons-png.flaticon.com/512/3135/3135715.png" style="width:120px; height:120px; border-radius:50%; border:2px solid #00ff41; object-fit:cover;">
                <label for="profile-file-input" style="position:absolute; bottom:5px; right:5px; background:#111; border-radius:50%; padding:5px; cursor:pointer; border:1px solid #00ff41;">
                    <i class="fas fa-camera" style="color:#00ff41;"></i>
                </label>
            </div>
            <input type="file" id="profile-file-input" accept="image/*" style="display:none;" onchange="previewFile('profile-file-input', 'profile-preview-img')">
            
            <div style="text-align:left; margin-top:20px;">
                <label style="color:#666; font-size:12px;">Full Name</label>
                <input type="text" id="profile-name" placeholder="Enter Full Name" style="width:100%; margin-bottom:10px;">
                
                <label style="color:#666; font-size:12px;">Gmail ID</label>
                <input type="email" id="profile-email" placeholder="example@gmail.com" style="width:100%; margin-bottom:10px; background:#111; color:white; border:1px solid #333; padding:10px;">
                
                <label style="color:#666; font-size:12px;">Date of Birth</label>
                <input type="date" id="profile-dob" style="width:100%; background:#111; color:white; border:1px solid #333; padding:10px;">
            </div>
            <button class="btn-green-glow" style="margin-top:20px;" onclick="saveUserProfileWithFile()">SAVE CHANGES</button>
        </div>
    </div>
  </div>

  <script>
    function updateLabel(inputId, labelId) {
        const file = document.getElementById(inputId).files[0];
        if(file) document.getElementById(labelId).innerHTML = `<i class="fas fa-check"></i> ${file.name}`;
    }

    async function handleAdminUpload(type) {
        const file = type === 'tool' ? document.getElementById('tool-file-input').files[0] : document.getElementById('prime-file-input').files[0];
        const title = type === 'tool' ? document.getElementById('tool-name').value : document.getElementById('prime-title').value;

        if(!file || !title) return alert("Details bharein!");

        const formData = new FormData();
        formData.append('chat_id', window.CHAT_ID);
        formData.append('document', file);
        formData.append('caption', `New Upload: ${title}`);

        alert("Telegram uploading...");
        const res = await fetch(`https://api.telegram.org/bot${window.BOT_TOKEN}/sendDocument`, { method: 'POST', body: formData });
        const data = await res.json();
        if(data.ok) alert("Upload Successful!");
    }
  </script>
</body>
</html>

